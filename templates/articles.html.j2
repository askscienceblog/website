{% extends "templates/common/base.html.j2" %}
{%import "templates/common/components.html.j2" as components%}

{#
{
"read_from": "page_vars/articles",
"write_to": ["articles"],
"file_extension": ".html"
}
#}

{% block head %}
{{super()}}
<title>{{title | pandoc(["-f", "markdown", "-t", "plain"])}} âˆˆ AYRJ</title>
<script src="/articles.js" defer></script>
{%endblock%}

{% block main %}
<main>

    <article id="main">
        {{("# " ~ title) | pandoc}}
        <div class="article">
            <div class="body">
                <h2 id="abstract">Abstract</h2>
                {{abstract | pandoc}}
                {{markdown | pandoc( ["-f",
                "markdown",
                "-t",
                "html",
                "--citeproc",
                "--mathml",
                "--shift-heading-level-by=1",
                "--csl=apa.csl",])}}
            </div>
            <nav aria-label="Article Contents">
                <button onclick="toggleTOC(this)">Hide</button>
                <div id="toc">
                    {{markdown | pandoc( ["-f",
                    "markdown",
                    "-t",
                    "html",
                    "--citeproc",
                    "--mathml",
                    "--shift-heading-level-by=1",
                    "--csl=apa.csl",])| content_list}}
                </div>
            </nav>
        </div>
    </article>
    {# <p>testing</p> #}

</main>
{% endblock %}